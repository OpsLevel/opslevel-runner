# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and is generated by [Changie](https://github.com/miniscruff/changie).## [October 05, 2023](https://github.com/OpsLevel/opslevel-runner/compare/v2023.10.3...v2023.10.5)## [October 03, 2023](https://github.com/OpsLevel/opslevel-runner/compare/v2023.9.29...v2023.10.3)## [September 29, 2023](https://github.com/OpsLevel/opslevel-runner/compare/v2023.9.8...v2023.9.29)## [September 08, 2023](https://github.com/OpsLevel/opslevel-runner/compare/v2023.7.18...v2023.9.8)
### Feature
* update go version from 1.20 to 1.21
* Upgrade opslevel-go to pickup request throttling work## [July 18, 2023](https://github.com/OpsLevel/opslevel-runner/compare/v2023.5.18...v2023.7.18)
### Feature
* Increase timeout on graphql requests to 60s
### Refactor
* Upgrade opslevel-go to 2023.7.17
* Convert to using opslevel.ID## [May 18, 2023](https://github.com/OpsLevel/opslevel-runner/compare/v2022.12.2...v2023.5.18)
### Feature
* Add flag to override the job pod max wait time for exec command
### Dependency
* Bump k8s.io/apimachinery from 0.25.4 to 0.26.0 in /src
* Bump github.com/getsentry/sentry-go from 0.13.0 to 0.16.0 in /src
* Bump k8s.io/api from 0.25.4 to 0.26.0 in /src
* Bump github.com/prometheus/client_golang from 1.12.2 to 1.14.0 in /src
* Bump github.com/spf13/viper from 1.8.1 to 1.15.0 in /src
* Bump actions/cache from 2 to 3
* Bump emmyoop/changie_bot from 1.0.1 to 1.1.0
* Bump goreleaser/goreleaser-action from 2.7.0 to 4.2.0
* Bump actions/setup-go from 2 to 4
* Bump codecov/codecov-action from 2 to 3
* Bump docker/login-action from 1 to 2## [December 02, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.11.23...v2022.12.2)
### Bugfix
* Ensure job pods are not restarted when they expire their lifetime## [November 23, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.9.25...v2022.11.23)
### Feature
* Adding leader election to handle scaling
* Add scaling capability
### Refactor
* Log error message when Sentry isn't configured
* Split log processor so we can handle stdout differently then stderr
* add `--job-pod-max-lifetime` flag with a default of 3600 seconds (1hr) to limit job pod lifetime
* rename all `pod-*` flags to `job-pod-*` to clarify what they effect now that the runner also self-scales
* rename all `POD_*` env vars to `JOB_POD_*` to sync to the changes made to the flags
### Bugfix
* Fixes a problem where stderr lines sometimes end up in multiline outcome vars inadvertantly## [September 25, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.8.26...v2022.9.25)
### Feature
* Add ability to specify the job pod resources
* Protect job pods from cluster scale in by creating a PodDisruptionBudget resource
### Refactor
* Add job logs to Sentry events
### Bugfix
* when being given sigint ensure we block until all jobWorkers have completed
* use correct config vars for pod log max size and interval
* Have multiline outcome var skip capturing bash command log lines when `set -xv` is enabled## [August 26, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.8.22...v2022.8.26)
### Feature
* Add logger logProcessor to run command when log-level is trace for debugging## [August 22, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.8.18...v2022.8.22)
### Feature
* add `::start-multiline-outcome-var <name>` and `::end-multiline-outcome-var` for easily submitting json as an outcome var## [August 18, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.8.3...v2022.8.18)
### Refactor
* Use JobNumber in observability messages vs JobId
### Bugfix
* Fix bug when shipping 0 length log chunks causes an API error## [August 03, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.07.14...v2022.8.3)
### Feature
* Send Sentry event for failed jobs## [July 15, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.06.28...v2022.07.14)
### Feature
* Add Sentry integration
* Upgrade opslevel-go to latest version
* Add request tracing## [June 29, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v22.05.30...v2022.06.28)
### Feature
* Enable runner to un/register itself if the API token allows for it## [July 29, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.07.14...v22.07.29)
### Bugfix
* Fix log sanitizer when variable value is empty string## [July 20, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v2022.07.14...v22.07.20)
### Feature
* When a Pod fails to start in time, report a PodTimeout back to OpsLevel instead of a QueueTimeout"## [May 30, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v22.05.27...v22.05.30)
### Bugfix
* Fix bug with log processor flushing
* ensure log lines are base64 encoded## [May 28, 2022](https://github.com/OpsLevel/opslevel-runner/compare/v22.05.24...v22.05.27)
### Feature
* Add ability to ship job logs back to OpsLevel## [May 25, 2022]((https://github.com/OpsLevel/opslevel-runner/compare/v0.1.2...v22.05.24))
### Feature
* Add prometheus metrics instrumentation## v0.1.2 - 2022-04-28
### Feature
* add support for get pending job lastUpdateToken
* Add support for RunnerJobOutcomeVariable
* Allow pod namespace to be configured## v0.1.1 - 2022-04-19
### Feature
* Print version upon startup
### Refactor
* Adjust some log levels to make more sense## v0.1.0 - 2022-04-05
### Feature
* Publish opslevel-runner docker image## v0.0.1-beta6 - 2022-04-04
### Feature
* Initialize Changelog
* Add log scrubbing of sensitive variables
### Refactor
* Productionalization and LocalDev improvements